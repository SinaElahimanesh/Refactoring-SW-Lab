# گزارش آزمایش چهارم درس آزمایشگاه مهندسی نرم‌افزار (بازآرایی کد)

## پرسش‌ها

۱-

- کد تمیز (Clean Code): به کدی گفته می‌شود که تمیز، قابل فهم و قابل نگهداری باشد. اگر در نوشتن کدی می‌خواهیم تمیزی کد را رعایت کنیم همواره این را در ذهنمان باید داشته باشیم که قرار است این کد توسط افراد دیگر خوانده شود و درک شود و تغییر داده شود. شاید در نگهداری آن هم افراد دیگری دخیل باشند. بنابراین باید سعی کنیم کدی قابل فهم و قابل تغییر با انعطاف‌پذیری بالا بنویسیم.

- بدهی فنی (Technical Debt): برخی از موارد فنی در کد هستند که ممکن است عدم فیکس آنها در آینده هزینه‌های اضافی بهمان تحمیل کند. در نتیجه باید آنها را در جایی بنویسیم و در اولین فرصت این بدهی‌ها را پرداخت کنیم و آنها را پیاده نماییم. به این نکته باید توجه کنیم که هرچقدر زمان بیشتری از یک بدهی فنی بگذرد امکان اینکه خطای بزرگتری در کد ایجاد کند بیشتر می‌شود.

- بوی بد (Bad Smell): این نوع از موارد خطای فنی نیستند و این‌گونه نیست که باعث ایجاد خطا در اجرای کد شود و کارایی را از بین ببرند ولی نوعی از ضعف‌ها در طراحی هستند که می‌توانند ریسک انواع باگ‌ها را بالا ببرند و یا سرعت طراحی را کاهش دهند و در نتیجه در بلندمدت ایجاد مشکل نمایند.

۲- دسته‌ی اول (Bloaters): این دسته مواردی را شامل می‌شود که به دلیل حجم زیاد و بزرگ بودن ایجاد مشکل می‌کنند. به عنوان نمونه متدهای طولانی، کلاس‌های بزرگ و لیست پارامترهای طولانی در این دسته قرار می‌گیرند. به این ترتیب در این دسته طولانی بودن و حجم زیاد می‌تواند باعث ایجاد خطا و مشکلاتی در نگهداری کد شود.

دسته دوم (Object-Orientation Abusers): این دسته به مواردی اشاره دارد که سو استفاده از شی‌گرایی در جای نادرست است. مثلا اینکه دو کلاس با کارایی یکسان ولی نام‌های متفاوت داشته باشیم و یا اینکه به صورت نابه‌جایی فیلدهای موقتی داشته باشیم و یا استفاده از switch statement نوع دیگری از این موارد سو استفاده است. به عبارتی این موارد کاربردهای ناقص یا نادرست از شی‌گرایی هستند.

دسته سوم (Change Preventers): این دسته از بوهای بد به تغییرات مرتبط می‌شوند. به صورتی که برای ایجاد تغییر در یک قسمت از کد ناچار به این هستیم که قسمت‌های زیادی از کد را در جاهای مختلف تغییر دهیم. به این ترتیب تغییرات پیچیده و طولانی می‌شوند. به عنوان نمونه بوی بد shotgun surgery دقیقا نمونه‌ی همین مورد است که ساچمه‌ها به جاهای دیگر کد میریزند و نیازمند تغییر همه‌ی کد هستیم.

دسته‌ی چهارم (Dispensables): این بوی بد اشاره به موارد اضافی دارد که شاید حذف کردن آنها باعث شود که کد تمیزتر و بهتری داشته باشیم. کامنت‌های اضافی، کدهای داپلیکیت و کدهای مرده که قابل دسترسی نیستند از این موارد اضافه هستند که کد را به صورت اضافی طولانی و پیچیده کرده‌اند و حذف‌ کردن آنها بهتر است.

دسته‌ی پنجم (Couplers): این دسته مواردی هستند که کاپلینگ بین کلاس‌ها را زیاد کرده‌اند و این افزایش وابستگی بین کلاس‌ها می‌تواند باعث ایجاد مشکلات مختلفی شود. به عنوان نمونه زنجیره‌ی پیام‌ها (message chains) یکی از این موارد هستند که باعث افزایش کاپلینگ می‌شوند. در این دسته همینطور کال کردن متعدد کلاس‌ها توسط همدیگر در یک زنجیره را داریم و باعث افزایش کاپلینگ می‌شود. موارد دیگر این دسته هم پترن مشابهی در افزایش کاپلینگ دارند.

۳- الف) این نوع از انواع بوی بد در دسته بندی Dispensables (موارد بی‌مصرف) قرار دارد. چراکه به این معنی است که اگر کلاسی در مواقع بسیار نادری استفاده می‌شود و آنقدر کاربردی نیست یا توجه ما را به خود جلب نمی‌کند، باید حذف شود. چونکه نگهداری یک کلاس هزینه‌بر است و ممکن است در آینده ایجاد مشکل کند.

۳- ب) برای برطرف کردن این بوی بد دو راهکار داریم. یکی اینکه برای کامپوننت‌هایی که نزدیک به بی‌فایده‌ بودن هستند از inline classes استفاده کنیم. یعنی می‌توان هر فیچری که این کلاس دارد را به کلاس دیگری که آن را در بر می‌گیرد منتقل نمود.

راهکار دیگر هم این است که از برای زیرکلاس‌ها با تعداد توابع کم می‌توان از collapse hierarchy استفاده نمود. بدین معنی که زیرکلاس را با سوپرکلاس با هم ترکیب نماییم و یک کلاس ایجاد کنیم.

۳- پ) گاهی اوقات یک کلاس که به ظاهر تنبل می‌آید در واقع برای توسعه‌های آینده ایجاد شده است و ممکن است در آینده به کار بیاید. در این مورد باید سعی کنیم خودمان به یک تعادل نسبی بین سادگی و همچنین تمیز بودن و خوانایی کد برقرار نماییم.
